/*
 0BSD
*/
(function(){function e(){if(!(this instanceof e))return new e;f.set(this,{})}var f=new WeakMap;var g=new WeakMap;e.prototype={on:function(a,c){var b;a&&c&&((b=f.get(this))[a]||(b[a]=[])).push(c);return this},off:function(a,c){var b;if(b=f.get(this)[a])c?(a=g.get(c)||c,a=b.indexOf(a),-1!==a&&b.splice(a,1)):delete f.get(this)[a];return this},once:function(a,c){var b=this;if(a&&c){var d=function(){if(!d.a)return d.a=!0,b.off(a,d),c.apply(null,arguments)};g.set(c,d);this.on(a,d)}return this},fire:function(a,
c){var b=Promise.resolve();var d=arguments;(f.get(this)[a]||[]).forEach(function(a){b=b.then(function(){var b=a.call.apply(a,d);return!1===b?Promise.reject():b})});b["catch"](function(a){a instanceof Error&&console.error(a)});return b}};"function"===typeof define&&define.amd?define(function(){return e}):"object"===typeof exports?module.exports=e:this.async_eventer=e}).call(this);